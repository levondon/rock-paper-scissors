<!DOCTYPE html>
<html>
    <head>
        <meta charset="UTF-8">
        <title>JS RPS Game</title>
    </head>
    <body>
        <script>
            function computerPlay() {
                let cpuChoice = ["rock", "paper", "scissors"];
                return cpuChoice[random(0,3)];
            }

            function playerSelection() {
                let playerChoice = prompt("Type choice: rock, paper or scissors");
                while (true) {
                    playerChoice = playerChoice.toLowerCase(); 
                    if (playerChoice == "rock" || playerChoice == "paper" || playerChoice == "scissors") {
                        return playerChoice;
                    }
                    playerChoice = prompt("Choice not recognized, Type choice: rock, paper or scissors");
                }
            }

            function random(min, max) {
                return Math.floor(Math.random() * (max - min)) + min;
            }

            function playRound(player, computer) {
                if (player == computer) {
                    return `Both players picked ${player}, tie game`;
                } else if ((player == "rock" && computer == "scissors") || +
                    (player == "paper" && computer == "rock") || +
                    (player == "scissors" && computer == "paper")) { 
                    return `You win! ${player} beats ${computer}!`;
                } else {
                    return `You lose! ${computer} beats ${player}!`;
                }
            }

            function game() {
                let gameCounter = 0;
                let playerScore = 0;
                let computerScore = 0;
                while(gameCounter < 5) {
                    gameCounter++
                    let score = playRound(playerSelection(), computerPlay())
                    console.log(score);
                    if(score.search("win") == 4) {
                        playerScore++
                    } else if(score.search("lose") == 4) {
                        computerScore++
                    }
                }
                if(playerScore > computerScore) {
                    return `You Win! With a score of ${playerScore} vs ${computerScore}.`
                } else if(playerScore < computerScore) {
                    return `You Lose! With a score of ${playerScore} vs ${computerScore}.`
                } else {
                    return `Game is Tied, Both players scored ${playerScore}.`
                }
            }
        </script>
    </body>
</html>